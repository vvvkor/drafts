/*! granum2024.js */
(()=>{const a=(e,t,a)=>(e.dataset.parent?e.closest(e.dataset.parent):document)?.querySelectorAll(e.dataset[t]).forEach(e=>a(e)),o=t=>{"checkbox"==t.type?a(t,"nodes",e=>e.classList[t.checked!="reverse"in t.dataset?"add":"remove"](...t.value.split(/\s+/))):("radio"==t.type&&t.checked||t.options)&&a(t,"nodes",e=>e.className=t.value)},p=(e,t)=>{var a=e.closest("li").querySelector("ul");a&&(t&&(t.preventDefault(),a.classList.toggle("hide")),e.classList[a.classList.contains("hide")?"remove":"add"]("act"))},f=(t,e)=>{e&&e.preventDefault();e=t.closest(".tabs");e.nextElementSibling.querySelectorAll(":scope > [id]").forEach(e=>e.classList[e.id==t.hash.slice(1)?"add":"remove"]("show")),e.querySelectorAll('a[href^="#"]').forEach(e=>e.classList[e==t?"add":"remove"]("act"))},t=e=>{var t=location.hash?document.querySelector(location.hash)?.closest(".modal"):null;t&&!t.matches(":focus-within")&&((e?.type||!location.hash?null:t.querySelector(location.hash))||t.querySelector("button,input,select,textarea,[contenteditable]"+("focusin"==e?.type?',[href],[tabindex]:not([tabindex="-1"])':"")))?.focus()};document.addEventListener("DOMContentLoaded",e=>{document.body.classList.add("js"),document.querySelectorAll(".mem[id], form.mem [id]").forEach(e=>{var t=localStorage.getItem("val-"+e.id);null!=t&&(e.matches("details")?e.open=!!t:["checkbox","radio"].includes(e.type)?e.checked=t==e.value:e.value=t)});const a=new URL(location.href);document.querySelectorAll("[data-get]:not(form), form[data-get] [name]").forEach(e=>{var t=a.searchParams.getAll(e.dataset.get||e.name);t.length<1||(["checkbox","radio"].includes(e.type)?e.checked=t.includes(e.value):e.matches("input,textarea,select")?e.value=t.join(", "):e.innerHTML=t.join(", "))}),document.querySelectorAll("table").forEach(e=>{(e.className.match(/\b[lcr]\d\d?\b/g)||[]).forEach(t=>{e.querySelectorAll("tr>*:nth-child("+t.slice(1)+")").forEach(e=>e.classList.add(t.slice(0,1)))})}),document.querySelectorAll("[data-nodes]").forEach(e=>o(e)),document.querySelectorAll('[href="#open"]').forEach(e=>p(e)),document.querySelectorAll(".tabs").forEach(e=>f(e.querySelector('a[href^="#"]'))),document.querySelectorAll("[data-hint]").forEach(e=>e.removeAttribute("title")),setTimeout(t,100)}),document.addEventListener("click",e=>{const t=e.target,a=t.closest("a, button"),o=t.closest(".sort th, th.sort");if(o&&!t.closest("a, input, [name]")){const r=o.cellIndex,i=o.closest("thead").nextElementSibling;if(1<i.rows.length){const d=o.closest("table").dataset.sort||"info";var s=[...i.rows].map(e=>[e,e.cells[r].textContent.replace(/\s+$/,"")]).map(e=>[e[0],e[1],parseFloat(e[1])]);const h=isNaN(s[0][2])?1:2,u=o.classList.contains(d)&&s[0][h]<s[s.length-1][h]?-1:1;s.sort((e,t)=>e[h]<t[h]?-u:e[h]>t[h]?u:0),s.forEach(e=>i.append(e[0])),[...o.parentNode.children].forEach(e=>e.classList.toggle(d,e==o))}}if(a)if(location.hash&&["#prev","#next"].includes(a.hash)){e.preventDefault();s=document.querySelector(location.hash)?.dataset["#prev"==a.hash?"prev":"next"];s&&(location.hash=s)}else if("#back"==a.hash)e.preventDefault(),history.go(-1);else if("#open"==a.hash)p(a,e);else if(a.closest(".tabs"))f(a,e);else if(a.classList.contains("dialog")){e.preventDefault();s=a.title||a.textContent;const o=a.href||a.dataset.href;if(!o)return alert(s);var c=new URL(location.href),l=new URL(o||"#cancel",location.href),n=a.dataset.prompt,c=n?prompt(s,c.searchParams.get(n)||a.dataset.def||l.searchParams.get(n)||""):confirm(s)?1:null;null!=c&&(l.searchParams.set(n||a.dataset.param||"confirm",c),a.matches('[target="_blank"], [data-blank]')?window.open(l):location.href=l)}else if(a.classList.contains("copy")){const t=document.querySelector(a.hash);if(t){e.preventDefault(),t.select(),document.execCommand("copy");const m=a.className;a.className="icon-check success",setTimeout(()=>a.className=m,3e3)}}}),document.addEventListener("input",e=>{const t=e.target;t.id&&(t.classList.contains("mem")||t.form?.classList.contains("mem"))&&("radio"==t.type&&(t.closest("form")||document).querySelectorAll(`[type="radio"][name="${t.name}"][id]`).forEach(e=>localStorage.removeItem("val-"+e.id)),localStorage.setItem("val-"+t.id,["checkbox","radio"].includes(t.type)&&!t.checked?"":t.value)),t.dataset.check&&a(t,"check",e=>e.checked=t.checked&&!e.closest("[hidden]")),t.dataset.nodes&&o(t),t.dataset.filter&&a(t,"filter",e=>e.querySelectorAll("tbody tr").forEach(e=>e.hidden=!(" "+e.textContent.replace(/\s+/g," ")+" ").match(new RegExp(t.value,"i"))));e=t.dataset.area,e&&(document.querySelector(e).value=t.innerHTML),e=t.dataset.editor;e&&(document.querySelector(e).innerHTML=t.value)}),document.addEventListener("toggle",({target:e})=>{e.matches("details")&&e.id&&e.classList.contains("mem")&&localStorage.setItem("val-"+e.id,e.open?1:"")},!0),document.addEventListener("keydown",e=>{"Escape"==e.key&&(location.hash="#escape",document.querySelectorAll("details.pop").forEach(e=>e.removeAttribute("open")))}),document.addEventListener("mouseover",e=>{var t=e.target.closest?.(".popwin"),e=e.target.closest?.(".pop.pos"),a=e?e.querySelector(":scope > *+:last-child"):null;t||document.querySelectorAll(".popwin").forEach(e=>e.classList.add("hide")),a&&!e._win&&((e._win=a).classList.add("popwin"),document.body.append(a)),e&&e._win&&(t=e.getBoundingClientRect(),e._win.style.cssText="",t.left+t.right<window.innerWidth?e._win.style.left=t.left+"px":e._win.style.right=document.documentElement.clientWidth-t.right+"px",t.top+t.bottom<window.innerHeight?e._win.style.top=t.bottom+"px":e._win.style.bottom=document.documentElement.clientHeight-t.top+"px",e._win.classList.remove("hide"))}),document.addEventListener("focusin",t),window.addEventListener("hashchange",t)})();