<style>

body:has(#config-undec-links:checked) a {text-decoration: none;}

body {font:120%/1.5 sans-serif;}
button, table, input, textarea, select, [contenteditable] {font:inherit;}
table {border-collapse:collapse;}
.mar {margin:1em 0;}
.pad {padding:.5em 1em;}

/* 1. global defaults */
:root{
  /* base */
  --neutral: #555;
  --neutral-lite: #eee;
  --invert-lite: #fff;
  --invert: #000;
  /* common */
  --base-line: 2px;
  --base-radius:.3em;
  --base-border: #ddd;
  --base-shadow-hover: #9993;
  /* tags */
  --button-bg: #fff;
  --input-bg: #fff;
  --input-text: #000;
  --input-border: #ccc;
  /* status */
  --primary-lite: #def;
  --primary: #039;
  --primary-lite: #def;
  --note: #888;
  --note-lite: #eee;
  --info: #08a;
  --info-lite: #bef;
  --success: #181;
  --success-lite: #beb;
  --warning: #d70;
  --warning-lite: #fd9;
  --danger: #c00;
  --danger-lite: #fbb;
}

/* 2. element and state defaults */
a {--tag-text: var(--primary);--text:var(--tag-text, var(--neutral));}
button {--tag-bg:var(--button-bg);--bg:var(--tag-bg, var(--neutral-lite));}
button, :where(.inv:not(tr>*), .tag) {--border:transparent;}
input, textarea, select, [contenteditable] {--tag-text:var(--input-text);--tag-bg:var(--input-bg);--tag-border:var(--input-border);--border: var(--tag-border);--text:var(--tag-text, var(--neutral));--bg:var(--tag-bg, var(--neutral-lite));}
tr>* {--tag-border:var(--base-border);}
:visited {}
:hover {}
:active {}
:invalid {}
:focus {}
:focus-visible {}
:disabled {}

/* 3. hue pallette */
.neutral {--dark:var(--neutral);--lite:var(--neutral-lite);}
.primary, button {--dark:var(--primary);--lite:var(--primary-lite);}
/*.inv {--dark:var(--invert);--lite:var(--invert-lite);}*/
.primary {--dark:var(--primary);--lite:var(--primary-lite);}
.note {--dark:var(--note);--lite:var(--note-lite);}
.info {--dark:var(--info);--lite:var(--info-lite);}
.success {--dark:var(--success);--lite:var(--success-lite);}
.warning {--dark:var(--warning);--lite:var(--warning-lite);}
.danger {--dark:var(--danger);--lite:var(--danger-lite);}


/* 4. mapping */
.text, /*.bord,*/ :is(.neutral, .primary, .danger, .warning, .success, .info, .note):where(:not(
  /* .bg without .text or .bord: do not set text color */
    .bg:not(.bord)
  /* does .bord set text color ? */
    /* v1. .bord sets text color for all */
    /*, .bord /* v2. .bord does not set text color */
    , .bord:is(input, textarea, select, [contenteditable], table) /* v3. .bord sets text color except for inputs and table>* */
)) {--text:var(--dark, var(--tag-text, var(--neutral)));}
:where(button, .inv, .tag):not(.bg, .bord) {--text:var(--invert-lite);--bg:var(--dark, var(--tag-text, var(--invert)));}
.bg {--bg:var(--lite, var(--tag-bg, var(--neutral-lite)));}
.bord {--border:var(--dark, var(--tag-border, var(--base-border)));}

/* 5. apply */
body {
  color: var(--neutral);
  background-color: #fff; var(--neutral-lite);
}
.bg {background-clip: border-box;}
:where(
  input, textarea, select, [contenteditable],
  button, .inv:not(tr>*), .tag,
  .bord:not(table, tr>*), table.bord tr>*
)
{
  border: var(--base-line) solid var(--border, var(--text));
  border-radius: var(--base-radius);
  box-sizing: border-box;
  /* background-clip: border-box; /* default */
}

/* table outline */
tr>* {border-radius:0;}
tr>*.bord {border-color:inherit;--l:var(--base-line);outline:var(--l) solid var(--border);outline-offset:calc(-1 * var(--l));}
tr:hover{--l:var(--base-line);outline:var(--l) solid var(--primary);outline-offset:calc(-1 * var(--l));}
tr:hover>*{box-shadow:inset 0 0 5em var(--base-shadow-hover);}

:where(
  a,
  input, textarea, select, [contenteditable],
  button, .inv, .tag,
  .neutral, .primary, .danger, .warning, .success, .info, .note,
  .text, .bg, .bord
) {
  color: var(--text);
  background-color: var(--bg);
  border-color: var(--border);
  /* display:inline-block; */
}

/* smart dark mode */

html, img, video, iframe, .invert, dialog {filter:var(--mode);}
html {--mode:none;}
html.invert, html:has(#config-invert-body:checked) {--mode:invert(.95) hue-rotate(180deg);}


</style>

<body class="hide-link-underline">
  <div>
    todo: :visited, .act, :hover, :focus, #invert shade
  </div>
  <div class="mar">
    <label><input type="checkbox" id="config-invert-body"> invert-body</label><br>
    <label><input type="checkbox" id="config-undec-links"> config-undec-links</label><br>
  </div>
  <table class="bord info">
    <tr>
      <td class="bg success bord">aaaaa
      <td class="bg warning bord">bbbbb
      <td class="bg danger">ccccc
      <td class="">ddddd
  </table>
</body>

<script>
  const tags = ['span', 'a', 'input', 'button', 'td']
  const classes = ['', 'bg', 'bg text', 'bord', 'bord text', 'bord bg', 'bord text bg', 'inv']
  const states = ['', 'neutral', 'primary', 'note', 'info', 'success', 'warning', 'danger']
  for (const tag of tags) {
    const tab = (tag == 'td')
    const sec = document.createElement(tab ? 'table' : 'section')
    sec.classList.add('mar')
    if (tab) sec.classList.add('bord')
    for (const cls of classes) {
      const row = document.createElement(tab ? 'tr' : 'div')
      for (const state of states) {
        const item = document.createElement(tag)
        const lnk = (tag == 'a')
        const inp = (tag == 'input')
        const btn = (tag == 'button')
        const prop = inp ? 'value' : 'textContent'
        item[prop] = lnk ? 'link' : tag // + '.' + cls
        if (inp) item.size = 3
        if (inp || btn) item.name = 'in'
        if (lnk) item.href = '#link'
        item.classList.add(...[...cls.split(' '), state].filter(v => v))
        row.append(item, ' ')
      }
      sec.append(row)
    }
    document.body.append(sec)
  }
</script>