/*! granum2024.js */
(()=>{const a=(e,t,a)=>(e.dataset.parent?e.closest(e.dataset.parent):document)?.querySelectorAll(e.dataset[t]).forEach(e=>a(e)),o=t=>{"checkbox"==t.type?a(t,"nodes",e=>e.classList[t.checked!="reverse"in t.dataset?"add":"remove"](...t.value.split(/\s+/))):("radio"==t.type&&t.checked||t.options)&&a(t,"nodes",e=>e.className=t.value)},m=(e,t,a,o)=>{if(o=o||("#open"==e.hash?e.closest("li").querySelector("ul"):document.querySelector(e.hash+".toggle"))){null!=t&&(t.type&&t.preventDefault(),o.classList[t.type?"toggle":t?"remove":"add"]("hide"));const s=o.classList.contains("hide");a&&o.id&&o.classList.contains("mem")&&localStorage.setItem("val-"+o.id,s?"":1),(o.id?document.querySelectorAll('[href="#'+o.id+'"]'):[e]).forEach(e=>e.classList[s?"remove":"add"]("act"))}};document.addEventListener("DOMContentLoaded",e=>{document.body.classList.add("js"),document.querySelectorAll(".target.js").forEach(e=>{e.classList.remove("target"),e.classList.add("toggle","hide")}),document.querySelectorAll(".mem[id], form.mem [id]").forEach(e=>{var t=localStorage.getItem("val-"+e.id);null!=t&&(e.matches("details")?e.open=!!t:["checkbox","radio"].includes(e.type)?e.checked=t==e.value:e.matches("input, select, textarea")?e.value=t:m(null,!!t,!1,e))});const a=new URL(location.href);document.querySelectorAll("[data-get]:not(form), form[data-get] [name]").forEach(e=>{var t=a.searchParams.getAll(e.dataset.get||e.name);t.length<1||(["checkbox","radio"].includes(e.type)?e.checked=t.includes(e.value):e.matches("input,textarea,select")?e.value=t.join(", "):e.innerHTML=t.join(", "))}),document.querySelectorAll("[data-nodes]").forEach(e=>o(e)),document.querySelectorAll('[href^="#"]').forEach(e=>m(e)),document.querySelectorAll("[data-hint]").forEach(e=>e.removeAttribute("title"))}),document.addEventListener("click",e=>{var t=e.target,a=t.closest("a, button");const o=t.closest(".sort th, th.sort");if(o&&!t.closest("a, input, [name]")){const n=o.cellIndex,r=o.closest("thead").nextElementSibling;if(1<r.rows.length){const d=o.closest("table").dataset.sort||"info";t=[...r.rows].map(e=>[e,e.cells[n].textContent.replace(/\s+$/,"")]).map(e=>[e[0],e[1],parseFloat(e[1])]);const i=isNaN(t[0][2])?1:2,h=o.classList.contains(d)&&t[0][i]<t[t.length-1][i]?-1:1;t.sort((e,t)=>e[i]<t[i]?-h:e[i]>t[i]?h:0),t.forEach(e=>r.append(e[0])),[...o.parentNode.children].forEach(e=>e.classList.toggle(d,e==o))}}if(a)if(location.hash&&["#prev","#next"].includes(a.hash)){e.preventDefault();t=document.querySelector(location.hash)?.dataset["#prev"==a.hash?"prev":"next"];t&&(location.hash=t)}else if("#back"==a.hash)e.preventDefault(),history.go(-1);else if(a.classList.contains("dialog")){e.preventDefault();t=a.title||a.textContent;const o=a.href||a.dataset.href;if(!o)return alert(t);var s=new URL(location.href),c=new URL(o||"#cancel",location.href),l=a.dataset.prompt,s=l?prompt(t,s.searchParams.get(l)||a.dataset.def||c.searchParams.get(l)||""):confirm(t)?1:null;null!=s&&(c.searchParams.set(l||a.dataset.param||"confirm",s),a.matches('[target="_blank"], [data-blank]')?window.open(c):location.href=c)}else a.hash&&m(a,e,!0)}),document.addEventListener("input",e=>{const t=e.target;t.id&&(t.classList.contains("mem")||t.form?.classList.contains("mem"))&&("radio"==t.type&&(t.closest("form")||document).querySelectorAll(`[type="radio"][name="${t.name}"][id]`).forEach(e=>localStorage.removeItem("val-"+e.id)),localStorage.setItem("val-"+t.id,["checkbox","radio"].includes(t.type)&&!t.checked?"":t.value)),t.dataset.check&&a(t,"check",e=>e.checked=t.checked&&!e.closest("[hidden]")),t.dataset.nodes&&o(t),t.dataset.filter&&a(t,"filter",e=>e.querySelectorAll("tbody tr").forEach(e=>e.hidden=!(" "+e.textContent.replace(/\s+/g," ")+" ").match(new RegExp(t.value,"i"))));e=t.dataset.area,e&&(document.querySelector(e).value=t.innerHTML),e=t.dataset.editor;e&&(document.querySelector(e).innerHTML=t.value)}),document.addEventListener("toggle",({target:e})=>{e.matches("details")&&e.id&&e.classList.contains("mem")&&localStorage.setItem("val-"+e.id,e.open?1:"")},!0),document.addEventListener("keydown",e=>{"Escape"==e.key&&(location.hash="#escape",document.querySelectorAll("details.pop").forEach(e=>e.removeAttribute("open")))})})();