/*! granum2024.js */
(()=>{const a=(e,t,a)=>(e.dataset.parent?e.closest(e.dataset.parent):document)?.querySelectorAll(e.dataset[t]).forEach(e=>a(e)),o=t=>{"checkbox"==t.type?a(t,"nodes",e=>e.classList[t.checked!="reverse"in t.dataset?"add":"remove"](...t.value.split(/\s+/))):("radio"==t.type&&t.checked||t.options)&&a(t,"nodes",e=>e.className=t.value)},h=(e,t)=>{var a=e.closest("li").querySelector("ul");a&&(t&&(t.preventDefault(),a.classList.toggle("hide")),e.classList[a.classList.contains("hide")?"remove":"add"]("act"))},u=(t,e)=>{e&&e.preventDefault();e=t.closest(".tabs");e.nextElementSibling.querySelectorAll(":scope > [id]").forEach(e=>e.classList[e.id==t.hash.slice(1)?"add":"remove"]("show")),e.querySelectorAll('a[href^="#"]').forEach(e=>e.classList[e==t?"add":"remove"]("act"))},t=e=>{var t=location.hash?document.querySelector(location.hash)?.closest(".modal"):null;t&&!t.matches(":focus-within")&&((e?.type||!location.hash?null:t.querySelector(location.hash))||t.querySelector("button,input,select,textarea,[contenteditable]"+("focusin"==e?.type?',[href],[tabindex]:not([tabindex="-1"])':"")))?.focus()};document.addEventListener("DOMContentLoaded",e=>{document.body.classList.add("js"),document.querySelectorAll(".mem[id], form.mem [id]").forEach(e=>{var t=localStorage.getItem("val-"+e.id);null!=t&&(e.matches("details")?e.open=!!t:["checkbox","radio"].includes(e.type)?e.checked=t==e.value:e.value=t)});const a=new URL(location.href);document.querySelectorAll("[data-get]:not(form), form[data-get] [name]").forEach(e=>{var t=a.searchParams.getAll(e.dataset.get||e.name);t.length<1||(["checkbox","radio"].includes(e.type)?e.checked=t.includes(e.value):e.matches("input,textarea,select")?e.value=t.join(", "):e.innerHTML=t.join(", "))}),document.querySelectorAll("table").forEach(e=>{(e.className.match(/\b[lcr]\d\d?\b/g)||[]).forEach(t=>{e.querySelectorAll("tr>*:nth-child("+t.slice(1)+")").forEach(e=>e.classList.add(t.slice(0,1)))})}),document.querySelectorAll("[data-nodes]").forEach(e=>o(e)),document.querySelectorAll('[href="#open"]').forEach(e=>h(e)),document.querySelectorAll(".tabs").forEach(e=>u(e.querySelector('a[href^="#"]'))),document.querySelectorAll("[data-hint]").forEach(e=>e.removeAttribute("title")),setTimeout(t,100)}),document.addEventListener("click",e=>{var t=e.target,a=t.closest("a, button");const o=t.closest(".sort th, th.sort");if(o&&!t.closest("a, input, [name]")){const l=o.cellIndex,n=o.closest("thead").nextElementSibling;if(1<n.rows.length){const r=o.closest("table").dataset.sort||"info";t=[...n.rows].map(e=>[e,e.cells[l].textContent.replace(/\s+$/,"")]).map(e=>[e[0],e[1],parseFloat(e[1])]);const d=isNaN(t[0][2])?1:2,i=o.classList.contains(r)&&t[0][d]<t[t.length-1][d]?-1:1;t.sort((e,t)=>e[d]<t[d]?-i:e[d]>t[d]?i:0),t.forEach(e=>n.append(e[0])),[...o.parentNode.children].forEach(e=>e.classList.toggle(r,e==o))}}if(a)if(location.hash&&["#prev","#next"].includes(a.hash)){e.preventDefault();t=document.querySelector(location.hash)?.dataset["#prev"==a.hash?"prev":"next"];t&&(location.hash=t)}else if("#back"==a.hash)e.preventDefault(),history.go(-1);else if("#open"==a.hash)h(a,e);else if(a.closest(".tabs"))u(a,e);else if(a.classList.contains("dialog")){e.preventDefault();t=a.title||a.textContent;const o=a.href||a.dataset.href;if(!o)return alert(t);var e=new URL(location.href),c=new URL(o||"#cancel",location.href),s=a.dataset.prompt,e=s?prompt(t,e.searchParams.get(s)||a.dataset.def||c.searchParams.get(s)||""):confirm(t)?1:null;null!=e&&(c.searchParams.set(s||a.dataset.param||"confirm",e),a.matches('[target="_blank"], [data-blank]')?window.open(c):location.href=c)}}),document.addEventListener("input",e=>{const t=e.target;t.id&&(t.classList.contains("mem")||t.form?.classList.contains("mem"))&&("radio"==t.type&&(t.closest("form")||document).querySelectorAll(`[type="radio"][name="${t.name}"][id]`).forEach(e=>localStorage.removeItem("val-"+e.id)),localStorage.setItem("val-"+t.id,["checkbox","radio"].includes(t.type)&&!t.checked?"":t.value)),t.dataset.check&&a(t,"check",e=>e.checked=t.checked&&!e.closest("[hidden]")),t.dataset.nodes&&o(t),t.dataset.filter&&a(t,"filter",e=>e.querySelectorAll("tbody tr").forEach(e=>e.hidden=!(" "+e.textContent.replace(/\s+/g," ")+" ").match(new RegExp(t.value,"i"))));e=t.dataset.area,e&&(document.querySelector(e).value=t.innerHTML),e=t.dataset.editor;e&&(document.querySelector(e).innerHTML=t.value)}),document.addEventListener("toggle",({target:e})=>{e.matches("details")&&e.id&&e.classList.contains("mem")&&localStorage.setItem("val-"+e.id,e.open?1:"")},!0),document.addEventListener("keydown",e=>{"Escape"==e.key&&(location.hash="#escape",document.querySelectorAll("details.pop").forEach(e=>e.removeAttribute("open")))}),document.addEventListener("focusin",t),window.addEventListener("hashchange",t)})();